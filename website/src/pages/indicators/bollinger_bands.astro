---
import IndicatorLayout from '../../layouts/IndicatorLayout.astro';

const indicatorId = 'bollinger_bands';
const indicatorName = 'Bollinger Bands';
const description = `Bollinger Bands are a volatility indicator created by John Bollinger in the 1980s. They consist of a moving average with two trading bands above and below it, defined by standard deviations. The bands expand during volatile markets and contract during less volatile periods, providing a relative definition of high and low prices.`;
const parameters = [
  {
    "name": "period",
    "type": "number",
    "default": 20,
    "min": 10,
    "max": 50,
    "description": "Number of periods for moving average and standard deviation"
  },
  {
    "name": "std_dev",
    "type": "number",
    "default": 2,
    "min": 1.0,
    "max": 3.0,
    "description": "Number of standard deviations for upper and lower bands"
  }
];
---

<IndicatorLayout
  indicatorId={indicatorId}
  indicatorName={indicatorName}
  description={description}
  parameters={parameters}
>
  <h2>Overview</h2>
  <p>
    Bollinger Bands are one of the most popular technical analysis tools, developed by John Bollinger in the 1980s. 
    This versatile indicator combines a moving average with volatility bands placed above and below it. The bands 
    dynamically adjust to market conditions, widening during volatile periods and narrowing during calm markets, 
    providing traders with a visual representation of volatility and potential support/resistance levels.
  </p>
  <p>
    The genius of Bollinger Bands lies in their self-adjusting nature. By using standard deviation to set the band 
    width, they create a statistically relevant envelope around price that contains approximately 95% of price action 
    (when using 2 standard deviations). This makes them invaluable for identifying overbought/oversold conditions, 
    trend strength, and potential reversal points.
  </p>

  <h2>How It Works</h2>
  <p>Bollinger Bands consist of three lines:</p>
  <ol>
    <li><strong>Middle Band:</strong> Simple Moving Average (SMA) of closing prices</li>
    <li><strong>Upper Band:</strong> Middle Band + (Standard Deviation × Multiplier)</li>
    <li><strong>Lower Band:</strong> Middle Band - (Standard Deviation × Multiplier)</li>
  </ol>
  
  <div class="not-prose bg-gray-100 dark:bg-gray-800 p-4 rounded-lg my-4 border border-gray-200 dark:border-gray-700">
    <p class="font-mono text-sm mb-0 text-gray-800 dark:text-gray-200">
      Middle Band = SMA(Close, n)<br/>
      <br/>
      σ = √(Σ(Close - SMA)² / n)<br/>
      <br/>
      Upper Band = Middle Band + (k × σ)<br/>
      Lower Band = Middle Band - (k × σ)<br/>
      <br/>
      Where:<br/>
      n = number of periods (typically 20)<br/>
      k = number of standard deviations (typically 2)<br/>
      σ = standard deviation of closing prices
    </p>
  </div>

  <h2>Key Features</h2>
  <ul>
    <li><strong>Dynamic Adaptation:</strong> Bands automatically adjust to changing market volatility</li>
    <li><strong>Statistical Foundation:</strong> Based on normal distribution principles</li>
    <li><strong>Multiple Uses:</strong> Trend, volatility, and reversal identification</li>
    <li><strong>Visual Clarity:</strong> Easy to interpret price position relative to bands</li>
  </ul>

  <h2>Interpretation & Trading Signals</h2>
  
  <h3>Basic Signals</h3>
  <div class="not-prose bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg my-4 border border-blue-200 dark:border-blue-800">
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100">Band Touches and Breaks:</h4>
    <ul class="list-disc list-inside mb-4 text-gray-700 dark:text-gray-300">
      <li><strong class="text-gray-900 dark:text-gray-100">Upper Band Touch:</strong> Potential overbought condition (not automatic sell)</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Lower Band Touch:</strong> Potential oversold condition (not automatic buy)</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Band Break:</strong> Strong momentum in breakout direction</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Walking the Bands:</strong> Sustained trend when price hugs one band</li>
    </ul>
    
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100">Band Patterns:</h4>
    <ul class="list-disc list-inside text-gray-700 dark:text-gray-300">
      <li><strong class="text-gray-900 dark:text-gray-100">Squeeze:</strong> Bands narrow to lowest volatility (breakout pending)</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Expansion:</strong> Bands widen rapidly (trend beginning)</li>
      <li><strong class="text-gray-900 dark:text-gray-100">M-Tops:</strong> Double top with second high at upper band</li>
      <li><strong class="text-gray-900 dark:text-gray-100">W-Bottoms:</strong> Double bottom with second low at lower band</li>
    </ul>
  </div>

  <h3>Advanced Patterns</h3>
  <ul>
    <li><strong>Bollinger Bounce:</strong>
      <ul>
        <li>Price tends to bounce between bands in ranging markets</li>
        <li>Buy at lower band, sell at upper band in sideways markets</li>
      </ul>
    </li>
    <li><strong>Squeeze Play:</strong>
      <ul>
        <li>Identify lowest volatility in 6 months (band width)</li>
        <li>Prepare for breakout when bands begin expanding</li>
        <li>Trade in direction of breakout with volume confirmation</li>
      </ul>
    </li>
    <li><strong>Band Rides:</strong>
      <ul>
        <li>Strong uptrend: Price rides upper band with few touches of middle band</li>
        <li>Strong downtrend: Price rides lower band</li>
      </ul>
    </li>
  </ul>

  <h3>Three Methods of Using Bollinger Bands</h3>
  <ol>
    <li><strong>Volatility Indicator:</strong> Band width shows market volatility cycles</li>
    <li><strong>Trend Indicator:</strong> Price position relative to bands shows trend strength</li>
    <li><strong>Pattern Recognition:</strong> M-tops, W-bottoms, and squeeze patterns</li>
  </ol>

  <h2>Practical Application</h2>
  
  <h3>Strengths</h3>
  <ul>
    <li>Adapts automatically to market conditions</li>
    <li>Provides both trend and volatility information</li>
    <li>Works in all market types (trending and ranging)</li>
    <li>Clear visual representation of price extremes</li>
    <li>Statistically sound methodology</li>
  </ul>

  <h3>Limitations</h3>
  <ul>
    <li>Lagging indicator (based on moving averages)</li>
    <li>Not a standalone system - requires confirmation</li>
    <li>Settings may need adjustment for different markets</li>
    <li>Can give false signals in strongly trending markets</li>
    <li>Standard deviation assumes normal distribution</li>
  </ul>

  <h2>Combination with Other Indicators</h2>
  <p>Bollinger Bands work best when combined with:</p>
  <ul>
    <li><strong>RSI:</strong> Confirm overbought/oversold with band touches</li>
    <li><strong>MACD:</strong> Momentum confirmation for band breaks</li>
    <li><strong>Volume:</strong> Validate breakouts from squeezes</li>
    <li><strong>%B:</strong> Quantify price position within bands</li>
    <li><strong>Bollinger Band Width:</strong> Measure squeeze objectively</li>
  </ul>

  <h2>Example Usage</h2>
  <p>Code examples will be available once the Rust implementation is complete.</p>
  </div>

  <h2>Mathematical Background</h2>
  <p>
    Bollinger Bands leverage the statistical concept of standard deviation to create a probability envelope around 
    price. In a normal distribution, approximately 68% of values fall within one standard deviation, and 95% within 
    two standard deviations. While financial markets don't follow perfect normal distributions, this framework 
    provides a useful approximation for identifying statistical extremes.
  </p>
  <p>
    John Bollinger's key insight was that volatility is dynamic, not static. By continuously recalculating the 
    standard deviation, the bands "breathe" with the market, expanding during volatile periods and contracting 
    during quiet periods. This adaptive quality makes them superior to fixed-percentage envelopes and provides 
    traders with a robust tool for multiple market conditions.
  </p>

</IndicatorLayout>