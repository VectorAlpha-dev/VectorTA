---
import IndicatorLayout from '../../layouts/IndicatorLayout.astro';

const indicatorId = 'efi';
const indicatorName = 'Elder Force Index (EFI)';
const description = `The Elder Force Index (EFI), developed by Dr. Alexander Elder, combines price movement with volume to measure the force behind market moves. By multiplying price change by volume, EFI reveals whether bulls or bears are in control and how much conviction backs their actions, making it invaluable for confirming trends and identifying potential reversals.`;
const parameters = [
  {
    "name": "period",
    "type": "number",
    "default": 13,
    "min": 2,
    "max": 50,
    "description": "Exponential moving average period for smoothing"
  }
];
---

<IndicatorLayout
  indicatorId={indicatorId}
  indicatorName={indicatorName}
  description={description}
  parameters={parameters}
>
  <h2>Overview</h2>
  <p>
    The Elder Force Index (EFI), created by Dr. Alexander Elder, represents a breakthrough in understanding market 
    dynamics by combining the two most fundamental aspects of trading: price movement and volume. Elder recognized 
    that price change alone doesn't tell the whole story—a small price move on huge volume can be more significant 
    than a large move on light volume. By multiplying price change by volume, EFI quantifies the actual force or 
    power behind each market move.
  </p>
  <p>
    What makes EFI particularly powerful is its ability to reveal the commitment level behind price movements. High 
    positive EFI values indicate strong buying pressure backed by heavy volume, while negative values show forceful 
    selling. The smoothed version (typically using a 13-period EMA) filters out noise while preserving the essential 
    information about who's winning the battle between bulls and bears. This makes EFI an excellent tool for 
    confirming breakouts, identifying divergences, and gauging the sustainability of trends.
  </p>

  <h2>How It Works</h2>
  <p>EFI calculation combines price change with volume:</p>
  <ol>
    <li><strong>Calculate Raw Force:</strong> (Close - Previous Close) × Volume</li>
    <li><strong>Determine Direction:</strong> Positive for up moves, negative for down</li>
    <li><strong>Apply Smoothing:</strong> Use EMA to smooth raw force values</li>
    <li><strong>Interpret Results:</strong> Higher absolute values = stronger force</li>
  </ol>
  
  <div class="not-prose bg-gray-100 dark:bg-gray-800 p-4 rounded-lg my-4 border border-gray-200 dark:border-gray-700">
    <p class="font-mono text-sm mb-0 text-gray-800 dark:text-gray-200">
      Raw Force Index = (Close - Close[1]) × Volume<br/>
      <br/>
      EFI = EMA(Raw Force Index, Period)<br/>
      <br/>
      Interpretation:<br/>
      Positive EFI = Bulls in control (buying pressure)<br/>
      Negative EFI = Bears in control (selling pressure)<br/>
      Rising EFI = Increasing bullish force<br/>
      Falling EFI = Increasing bearish force<br/>
      <br/>
      Zero Line:<br/>
      Above zero = Net buying pressure<br/>
      Below zero = Net selling pressure<br/>
      Crosses = Potential trend changes
    </p>
  </div>

  <h2>Key Features</h2>
  <ul>
    <li><strong>Volume Integration:</strong> Combines price and volume for complete picture</li>
    <li><strong>Force Measurement:</strong> Quantifies the power behind moves</li>
    <li><strong>Directional Clarity:</strong> Clear positive/negative readings</li>
    <li><strong>Divergence Detection:</strong> Excellent for spotting divergences</li>
  </ul>

  <h2>Interpretation & Trading Signals</h2>
  
  <h3>EFI Analysis</h3>
  <div class="not-prose bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg my-4 border border-blue-200 dark:border-blue-800">
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100">Force Readings:</h4>
    <ul class="list-disc list-inside mb-4 text-gray-700 dark:text-gray-300">
      <li><strong class="text-gray-900 dark:text-gray-100">Strong Positive EFI:</strong> Heavy buying with conviction</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Weak Positive EFI:</strong> Light buying, possible exhaustion</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Strong Negative EFI:</strong> Heavy selling with conviction</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Weak Negative EFI:</strong> Light selling, possible bottom</li>
    </ul>
    
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100">Key Signals:</h4>
    <ul class="list-disc list-inside text-gray-700 dark:text-gray-300">
      <li><strong class="text-gray-900 dark:text-gray-100">Zero Line Cross Up:</strong> Buying force taking control</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Zero Line Cross Down:</strong> Selling force taking control</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Divergences:</strong> Price/EFI divergences signal reversals</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Spikes:</strong> Extreme readings mark potential turns</li>
    </ul>
  </div>

  <h3>Trading Strategies</h3>
  <ul>
    <li><strong>Trend Confirmation:</strong>
      <ul>
        <li>Buy when EFI is positive and rising</li>
        <li>Sell when EFI is negative and falling</li>
        <li>Avoid trades when EFI contradicts price trend</li>
        <li>Use EFI slope for trend strength</li>
      </ul>
    </li>
    <li><strong>Divergence Trading:</strong>
      <ul>
        <li>Bullish: Price makes lower low, EFI makes higher low</li>
        <li>Bearish: Price makes higher high, EFI makes lower high</li>
        <li>Most reliable at major tops and bottoms</li>
        <li>Confirm with other indicators</li>
      </ul>
    </li>
    <li><strong>Breakout Confirmation:</strong>
      <ul>
        <li>True breakouts show strong EFI in breakout direction</li>
        <li>False breakouts have weak or contrary EFI</li>
        <li>Wait for EFI confirmation before entering</li>
        <li>Exit if EFI fails to confirm</li>
      </ul>
    </li>
    <li><strong>Zero Line Strategy:</strong> Trade only in direction of EFI (above/below zero)</li>
  </ul>

  <h3>Advanced Techniques</h3>
  <ul>
    <li><strong>Multi-Timeframe EFI:</strong> Align EFI across timeframes</li>
    <li><strong>EFI Histogram:</strong> Plot EFI - Signal Line for momentum</li>
    <li><strong>Normalized EFI:</strong> Divide by average volume for comparison</li>
    <li><strong>EFI Bands:</strong> Add standard deviation bands for extremes</li>
  </ul>

  <h2>Practical Application</h2>
  
  <h3>Strengths</h3>
  <ul>
    <li>Combines price and volume effectively</li>
    <li>Excellent divergence indicator</li>
    <li>Clear directional signals</li>
    <li>Works in all market conditions</li>
    <li>Simple yet powerful concept</li>
  </ul>

  <h3>Limitations</h3>
  <ul>
    <li>Requires accurate volume data</li>
    <li>Less effective in low-volume markets</li>
    <li>Can whipsaw around zero line</li>
    <li>Smoothing creates some lag</li>
    <li>Not suitable for volume-less markets (forex)</li>
  </ul>

  <h2>Combination with Other Indicators</h2>
  <p>EFI works excellently with:</p>
  <ul>
    <li><strong>MACD:</strong> EFI confirms MACD signals with volume</li>
    <li><strong>RSI:</strong> Combine for overbought/oversold with force</li>
    <li><strong>Moving Averages:</strong> MA for trend, EFI for confirmation</li>
    <li><strong>Support/Resistance:</strong> EFI behavior at key levels</li>
    <li><strong>Elder's Triple Screen:</strong> Part of Elder's complete system</li>
  </ul>

  <h2>Example Usage</h2>
  <p>Code examples will be available once the Rust implementation is complete.</p>

  <h2>Mathematical Background</h2>
  <p>
    The mathematical elegance of EFI lies in its simplicity. By multiplying price change by volume, Elder created 
    a physics-based indicator where Force = Mass × Acceleration. In market terms, volume represents the "mass" of 
    market participation, while price change represents the "acceleration." This creates a true measure of market 
    force that captures both the magnitude and the conviction behind price movements.
  </p>
  <p>
    The use of exponential smoothing (typically 13-period) serves two purposes: it filters out the random noise 
    inherent in daily volume fluctuations while preserving the responsiveness needed to detect genuine changes in 
    market force. The choice of 13 periods represents roughly two and a half trading weeks, providing a good balance 
    between sensitivity and stability that has proven effective across different markets and timeframes.
  </p>

</IndicatorLayout>