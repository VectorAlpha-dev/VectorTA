---
import IndicatorLayout from '../../layouts/IndicatorLayout.astro';

const indicatorId = 'adx';
const indicatorName = 'Average Directional Index (ADX)';
const description = `The Average Directional Index (ADX) is a trend strength indicator that measures the strength of a trend regardless of its direction. Developed by J. Welles Wilder, it helps traders determine whether a market is trending or ranging, and how strong the current trend is.`;
const parameters = [
  {
    "name": "period",
    "type": "number",
    "default": 14,
    "min": 7,
    "max": 50,
    "description": "Smoothing period for the ADX calculation"
  }
];
---

<IndicatorLayout
  indicatorId={indicatorId}
  indicatorName={indicatorName}
  description={description}
  parameters={parameters}
>
  <h2>Overview</h2>
  <p>
    The Average Directional Index (ADX) is a technical analysis indicator used to quantify trend strength. 
    Developed by J. Welles Wilder Jr. and introduced in his 1978 book "New Concepts in Technical Trading Systems," 
    the ADX is part of the Directional Movement System along with the Plus Directional Indicator (+DI) and Minus Directional Indicator (-DI).
  </p>
  <p>
    Unlike many indicators, ADX doesn't indicate trend direction—only trend strength. This makes it a valuable tool 
    for determining whether to use trend-following or range-trading strategies. The ADX is non-directional, meaning 
    it registers trend strength whether price moves up or down.
  </p>

  <h2>How It Works</h2>
  <p>The ADX is calculated through a complex process involving several steps:</p>
  <ol>
    <li><strong>Calculate Directional Movement (DM):</strong> 
      <ul>
        <li>+DM = Current High - Previous High (if positive and greater than -DM)</li>
        <li&gt;-DM = Previous Low - Current Low (if positive and greater than +DM)</li>
      </ul>
    </li>
    <li><strong>Calculate True Range (TR):</strong> The greatest of:
      <ul>
        <li>Current High - Current Low</li>
        <li>|Current High - Previous Close|</li>
        <li>|Current Low - Previous Close|</li>
      </ul>
    </li>
    <li><strong>Smooth the values:</strong> Apply Wilder's smoothing method (similar to EMA)</li>
    <li><strong>Calculate Directional Indicators:</strong>
      <ul>
        <li>+DI = 100 × Smoothed +DM / Smoothed TR</li>
        <li&gt;-DI = 100 × Smoothed -DM / Smoothed TR</li>
      </ul>
    </li>
    <li><strong>Calculate DX:</strong> DX = 100 × |+DI - -DI| / (+DI + -DI)</li>
    <li><strong>Calculate ADX:</strong> Apply Wilder's smoothing to DX values</li>
  </ol>
  
  <div class="not-prose bg-gray-100 dark:bg-gray-800 p-4 rounded-lg my-4 border border-gray-200 dark:border-gray-700">
    <p class="font-mono text-sm mb-0 text-gray-800 dark:text-gray-200">
      DX = 100 × |(+DI - -DI)| / (+DI + -DI)<br/>
      ADX = Wilder's Smoothing of DX over specified period
    </p>
  </div>

  <h2>Key Features</h2>
  <ul>
    <li><strong>Range:</strong> ADX values range from 0 to 100, though readings above 60 are rare</li>
    <li><strong>Non-Directional:</strong> Measures trend strength, not direction</li>
    <li><strong>Smoothed:</strong> Uses Wilder's smoothing to reduce false signals</li>
    <li><strong>Comprehensive:</strong> Part of a complete directional movement system</li>
  </ul>

  <h2>Interpretation & Trading Signals</h2>
  
  <h3>ADX Value Ranges</h3>
  <div class="not-prose bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg my-4 border border-blue-200 dark:border-blue-800">
    <ul class="list-none space-y-2 text-gray-700 dark:text-gray-300">
      <li><strong class="text-gray-900 dark:text-gray-100"&gt;0-25:</strong> Absent or weak trend - Market is likely ranging</li>
      <li><strong class="text-gray-900 dark:text-gray-100"&gt;25-50:</strong> Strong trend - Trend-following strategies favored</li>
      <li><strong class="text-gray-900 dark:text-gray-100"&gt;50-75:</strong> Very strong trend - Strong momentum present</li>
      <li><strong class="text-gray-900 dark:text-gray-100"&gt;75-100:</strong> Extremely strong trend - Rare, often unsustainable</li>
    </ul>
  </div>

  <h3>Trading Strategies</h3>
  <ul>
    <li><strong>Trend Identification:</strong> ADX above 25 suggests a trending market suitable for trend-following strategies</li>
    <li><strong>Range Identification:</strong> ADX below 20-25 suggests a ranging market suitable for oscillator strategies</li>
    <li><strong>Trend Strength Changes:</strong>
      <ul>
        <li>Rising ADX: Trend is strengthening</li>
        <li>Falling ADX: Trend is weakening (not necessarily reversing)</li>
      </ul>
    </li>
  </ul>

  <h3>Advanced Techniques</h3>
  <ul>
    <li><strong>ADX Slope:</strong> The rate of change in ADX can signal trend acceleration or deceleration</li>
    <li><strong>Divergence:</strong> Price making new highs/lows while ADX falls can signal trend exhaustion</li>
    <li><strong>ADX Reversal:</strong> When ADX turns up from below 20, it often signals the start of a new trend</li>
    <li><strong>Two-Line Crossover:</strong> Some traders use ADX crossing above 20 or 25 as a signal</li>
  </ul>

  <h2>Practical Application</h2>
  
  <h3>Strengths</h3>
  <ul>
    <li>Clearly quantifies trend strength</li>
    <li>Helps avoid whipsaws in ranging markets</li>
    <li>Works well across different markets and timeframes</li>
    <li>Can be combined with directional indicators for complete system</li>
    <li>Filters out market noise effectively</li>
  </ul>

  <h3>Limitations</h3>
  <ul>
    <li>Lagging indicator due to smoothing</li>
    <li>Doesn't indicate trend direction by itself</li>
    <li>Can remain low during slow, steady trends</li>
    <li>May give late signals at trend beginnings</li>
    <li>Complex calculation can be confusing for beginners</li>
  </ul>

  <h2>Combination with Other Indicators</h2>
  <p>The ADX works particularly well when combined with:</p>
  <ul>
    <li><strong>+DI and -DI:</strong> For complete directional movement analysis</li>
    <li><strong>Moving Averages:</strong> To identify trend direction when ADX shows strength</li>
    <li><strong>MACD or RSI:</strong> For entry timing in trending markets</li>
    <li><strong>Support/Resistance:</strong> To identify potential trend continuation or reversal points</li>
    <li><strong>Parabolic SAR:</strong> Another Wilder indicator for stop-loss placement</li>
  </ul>

  <h2>Example Usage</h2>
  <p>Code examples will be available once the Rust implementation is complete.</p>

  <h2>Mathematical Background</h2>
  <p>
    The ADX uses Wilder's smoothing technique, which is similar to an exponential moving average but uses a different smoothing factor. 
    For a 14-period ADX, Wilder's smoothing uses a multiplier of 1/14 for the new value and 13/14 for the previous smoothed value.
  </p>
  <p>
    The genius of the ADX lies in its ability to measure the difference between the positive and negative directional indicators 
    as a percentage of their sum. This normalization creates a bounded oscillator that effectively captures trend strength 
    regardless of the market's directional bias.
  </p>

</IndicatorLayout>