---
import IndicatorLayout from '../../layouts/IndicatorLayout.astro';

const indicatorId = 'alligator';
const indicatorName = 'Williams Alligator';
const description = `The Williams Alligator is a trend-following indicator that uses three smoothed moving averages to identify trending and ranging markets. Created by Bill Williams, it metaphorically represents an alligator with its jaw, teeth, and lips, helping traders identify when to enter trades and when to stay out of the market.`;
const parameters = [
  {
    "name": "jaw_period",
    "type": "number",
    "default": 13,
    "min": 10,
    "max": 30,
    "description": "Period for the Jaw line (Blue)"
  },
  {
    "name": "jaw_shift",
    "type": "number",
    "default": 8,
    "min": 5,
    "max": 15,
    "description": "Forward shift for the Jaw line"
  },
  {
    "name": "teeth_period",
    "type": "number",
    "default": 8,
    "min": 5,
    "max": 20,
    "description": "Period for the Teeth line (Red)"
  },
  {
    "name": "teeth_shift",
    "type": "number",
    "default": 5,
    "min": 3,
    "max": 10,
    "description": "Forward shift for the Teeth line"
  },
  {
    "name": "lips_period",
    "type": "number",
    "default": 5,
    "min": 3,
    "max": 15,
    "description": "Period for the Lips line (Green)"
  },
  {
    "name": "lips_shift",
    "type": "number",
    "default": 3,
    "min": 2,
    "max": 8,
    "description": "Forward shift for the Lips line"
  }
];
---

<IndicatorLayout
  indicatorId={indicatorId}
  indicatorName={indicatorName}
  description={description}
  parameters={parameters}
>
  <h2>Overview</h2>
  <p>
    The Williams Alligator indicator, developed by legendary trader Bill Williams, is a trend-following indicator that uses 
    three smoothed moving averages set at different periods. The indicator gets its name from the analogy of an alligator's 
    behavior: when the three lines are intertwined, the alligator is sleeping (no trend), and when they spread apart, 
    the alligator is awakening and eating (trending market).
  </p>
  <p>
    This indicator is part of Bill Williams' Trading Chaos theory and is designed to help traders identify trending periods 
    worth trading and ranging periods to avoid. The three lines represent the alligator's jaw, teeth, and lips, each providing 
    different timeframe perspectives on market behavior.
  </p>

  <h2>How It Works</h2>
  <p>The Alligator consists of three smoothed moving averages (SMMA) with different periods and forward shifts:</p>
  <ol>
    <li><strong>Jaw (Blue Line):</strong> 13-period SMMA shifted 8 bars into the future - represents long-term trend</li>
    <li><strong>Teeth (Red Line):</strong> 8-period SMMA shifted 5 bars into the future - represents medium-term trend</li>
    <li><strong>Lips (Green Line):</strong> 5-period SMMA shifted 3 bars into the future - represents short-term trend</li>
  </ol>
  
  <div class="not-prose bg-gray-100 dark:bg-gray-800 p-4 rounded-lg my-4 border border-gray-200 dark:border-gray-700">
    <p class="font-mono text-sm mb-0 text-gray-800 dark:text-gray-200"> Jaw (Blue) = SMMA(Median Price, 13) shifted 8 bars forward<br/>
      Teeth (Red) = SMMA(Median Price, 8) shifted 5 bars forward<br/>
      Lips (Green) = SMMA(Median Price, 5) shifted 3 bars forward<br/>
      <br/>
      Where: Median Price = (High + Low) / 2<br/>
      SMMA = Smoothed Moving Average (Wilder's smoothing)
    </p>
  </div>

  <h2>Key Features</h2>
  <ul>
    <li><strong>Three Balance Lines:</strong> Each line represents a different time perspective</li>
    <li><strong>Forward Displacement:</strong> Lines are shifted forward to reduce false signals</li>
    <li><strong>Smoothed Averages:</strong> Uses SMMA for smoother, less erratic signals</li>
    <li><strong>Visual Metaphor:</strong> Easy to understand sleeping/eating alligator concept</li>
  </ul>

  <h2>Interpretation & Trading Signals</h2>
  
  <h3>Alligator States</h3>
  <div class="not-prose bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg my-4 border border-blue-200 dark:border-blue-800">
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100"> Sleeping Alligator (Ranging Market):</h4> <ul class="list-disc list-inside mb-4 text-gray-700 dark:text-gray-300"> <li>All three lines are intertwined or crossing frequently</li>
      <li>No clear order to the lines</li>
      <li><strong class="text-gray-900 dark:text-gray-100"> Action:</strong> Stay out of the market or use range-trading strategies</li>
    </ul>
    
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100"> Awakening Alligator (Trend Beginning):</h4> <ul class="list-disc list-inside mb-4 text-gray-700 dark:text-gray-300"> <li>Lines begin to spread apart</li>
      <li>Clear order emerges: Lips → Teeth → Jaw</li>
      <li><strong class="text-gray-900 dark:text-gray-100"> Action:</strong> Prepare for trend-following trades</li>
    </ul>
    
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100"> Eating Alligator (Trending Market):</h4> <ul class="list-disc list-inside text-gray-700 dark:text-gray-300"> <li>Lines are widely separated in order</li>
      <li>Price stays on one side of all lines</li>
      <li><strong class="text-gray-900 dark:text-gray-100"> Action:</strong> Trade in the direction of the trend</li>
    </ul>
  </div>

  <h3>Trading Rules</h3>
  <ul>
    <li><strong>Bullish Signal:</strong> 
      <ul>
        <li>Lines in ascending order: Lips (top) → Teeth → Jaw (bottom)</li>
        <li>Price above all three lines</li>
        <li>Lines diverging (spreading apart)</li>
      </ul>
    </li>
    <li><strong>Bearish Signal:</strong>
      <ul>
        <li>Lines in descending order: Jaw (top) → Teeth → Lips (bottom)</li>
        <li>Price below all three lines</li>
        <li>Lines diverging (spreading apart)</li>
      </ul>
    </li>
    <li><strong>Exit Signal:</strong> Lines begin converging or crossing - alligator is "satisfied"</li>
  </ul>

  <h3>Advanced Interpretation</h3>
  <ul>
    <li><strong>Fractal Confirmation:</strong> Combine with Williams Fractals for precise entry points</li>
    <li><strong>Momentum Confirmation:</strong> The wider the lines spread, the stronger the trend</li>
    <li><strong>First Cross:</strong> The first time Lips crosses Teeth after a sleep period often signals trend start</li>
    <li><strong>Line Order:</strong> Perfect line order (no crossing) indicates strong, sustainable trend</li>
  </ul>

  <h2>Practical Application</h2>
  
  <h3>Strengths</h3>
  <ul>
    <li>Clear visual representation of market states</li>
    <li>Filters out ranging markets effectively</li>
    <li>Multiple timeframe analysis in one indicator</li>
    <li>Works well in strongly trending markets</li>
    <li>Part of a complete trading system (Profitunity)</li>
  </ul>

  <h3>Limitations</h3>
  <ul>
    <li>Lagging indicator due to moving averages and forward shift</li>
    <li>Can give late entry signals in fast-moving markets</li>
    <li>May produce whipsaws during transition periods</li>
    <li>Less effective in choppy or news-driven markets</li>
    <li>Requires patience as many periods show "sleeping" state</li>
  </ul>

  <h2>Combination with Other Indicators</h2>
  <p>The Alligator works particularly well when combined with other Bill Williams indicators:</p>
  <ul>
    <li><strong>Fractals:</strong> For precise entry and exit points when alligator is trending</li>
    <li><strong>Awesome Oscillator (AO):</strong> For momentum confirmation</li>
    <li><strong>Acceleration/Deceleration (AC):</strong> For early trend change warnings</li>
    <li><strong>Gator Oscillator:</strong> Visual representation of convergence/divergence</li>
    <li><strong>Market Facilitation Index:</strong> For volume analysis</li>
  </ul>

  <h2>Example Usage</h2>
  <p>Code examples will be available once the Rust implementation is complete.</p>
  </div>

  <h2>Mathematical Background</h2>
  <p>
    The Alligator uses Smoothed Moving Averages (SMMA), which are similar to exponential moving averages but with 
    different weighting. The forward displacement of each line is crucial to the indicator's effectiveness, as it 
    helps filter out false signals and ensures the alligator "opens its mouth" only for significant trends.
  </p>
  <p>
    The specific periods (5, 8, 13) are Fibonacci numbers, reflecting Bill Williams' belief in natural mathematical 
    relationships in markets. The forward shifts (3, 5, 8) are also Fibonacci numbers, creating a harmonic relationship 
    between the lines that helps identify sustainable trends.
  </p>

</IndicatorLayout>
