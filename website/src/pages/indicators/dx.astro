---
import IndicatorLayout from '../../layouts/IndicatorLayout.astro';

const indicatorId = 'dx';
const indicatorName = 'Directional Movement Index (DX)';
const description = `The Directional Movement Index (DX) is the raw calculation component of Welles Wilder's ADX system that measures the difference between positive and negative directional movement. As the foundation for calculating ADX, DX quantifies whether buyers or sellers are in control and by how much, providing essential information about market directional bias.`;
const parameters = [
  {
    "name": "period",
    "type": "number",
    "default": 14,
    "min": 10,
    "max": 30,
    "description": "Smoothing period for directional movement calculation"
  }
];
---

<IndicatorLayout
  indicatorId={indicatorId}
  indicatorName={indicatorName}
  description={description}
  parameters={parameters}
>
  <h2>Overview</h2>
  <p>
    The Directional Movement Index (DX) is the foundational calculation in Welles Wilder's revolutionary Directional 
    Movement System, serving as the raw material from which the Average Directional Index (ADX) is derived. While 
    traders rarely use DX directly, understanding it is crucial for grasping how the ADX system works. DX measures 
    the absolute difference between positive and negative directional indicators, normalized to create a percentage 
    that represents the clarity of directional movement in the market.
  </p>
  <p>
    What makes DX significant is its ability to quantify the dominance of either buyers or sellers at any given moment. 
    When DX is high, it indicates that one side has clear control—either bulls or bears are decisively winning. When 
    DX is low, it suggests a more balanced struggle between opposing forces, often indicating consolidation or 
    uncertainty. This raw measurement, when smoothed to create ADX, becomes one of the most reliable trend strength 
    indicators in technical analysis.
  </p>

  <h2>How It Works</h2>
  <p>DX calculation builds on the Directional Indicators (+DI/-DI):</p>
  <ol>
    <li><strong>Calculate +DI and -DI:</strong> Measure positive and negative directional movement</li>
    <li><strong>Find Difference:</strong> Calculate absolute difference between +DI and -DI</li>
    <li><strong>Calculate Sum:</strong> Add +DI and -DI together</li>
    <li><strong>Normalize:</strong> Divide difference by sum and multiply by 100</li>
    <li><strong>Result:</strong> DX value between 0 and 100</li>
  </ol>
  
  <div class="not-prose bg-gray-100 dark:bg-gray-800 p-4 rounded-lg my-4 border border-gray-200 dark:border-gray-700">
    <p class="font-mono text-sm mb-0 text-gray-800 dark:text-gray-200">
      First, calculate +DI and -DI:<br/>
      +DI = (Smoothed +DM / ATR) × 100<br/>
      -DI = (Smoothed -DM / ATR) × 100<br/>
      <br/>
      Then calculate DX:<br/>
      DI Difference = |+DI - -DI|<br/>
      DI Sum = +DI + -DI<br/>
      <br/>
      DX = (DI Difference / DI Sum) × 100<br/>
      <br/>
      To get ADX:<br/>
      ADX = Smoothed Average of DX values<br/>
      <br/>
      DX Range: 0 to 100<br/>
      0 = Equal directional forces<br/>
      100 = Complete directional dominance
    </p>
  </div>

  <h2>Key Features</h2>
  <ul>
    <li><strong>Directional Clarity:</strong> Measures how one-sided the market is</li>
    <li><strong>Foundation for ADX:</strong> Raw input for trend strength calculation</li>
    <li><strong>Normalized Scale:</strong> 0-100 range for easy comparison</li>
    <li><strong>Market Balance:</strong> Shows equilibrium between bulls and bears</li>
  </ul>

  <h2>Interpretation & Trading Signals</h2>
  
  <h3>DX Analysis</h3>
  <div class="not-prose bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg my-4 border border-blue-200 dark:border-blue-800">
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100">DX Levels:</h4>
    <ul class="list-disc list-inside mb-4 text-gray-700 dark:text-gray-300">
      <li><strong class="text-gray-900 dark:text-gray-100">DX > 50:</strong> Strong directional dominance</li>
      <li><strong class="text-gray-900 dark:text-gray-100">DX 25-50:</strong> Moderate directional movement</li>
      <li><strong class="text-gray-900 dark:text-gray-100">DX < 25:</strong> Weak or balanced directional forces</li>
      <li><strong class="text-gray-900 dark:text-gray-100">DX Near 0:</strong> Perfect balance (rare)</li>
    </ul>
    
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100">Market Implications:</h4>
    <ul class="list-disc list-inside text-gray-700 dark:text-gray-300">
      <li><strong class="text-gray-900 dark:text-gray-100">Rising DX:</strong> Increasing directional clarity</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Falling DX:</strong> Decreasing directional clarity</li>
      <li><strong class="text-gray-900 dark:text-gray-100">High DX Peaks:</strong> Potential trend exhaustion</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Low DX Troughs:</strong> Consolidation or reversal brewing</li>
    </ul>
  </div>

  <h3>Trading Strategies</h3>
  <ul>
    <li><strong>DX Momentum:</strong>
      <ul>
        <li>Rising DX with +DI > -DI: Strengthening uptrend</li>
        <li>Rising DX with -DI > +DI: Strengthening downtrend</li>
        <li>Falling DX: Weakening trend regardless of direction</li>
        <li>Use DX acceleration for trend confirmation</li>
      </ul>
    </li>
    <li><strong>DX Extremes:</strong>
      <ul>
        <li>Very high DX (>60): Potential trend exhaustion</li>
        <li>Very low DX (<20): Range-bound market</li>
        <li>DX turning from extremes: Possible trend change</li>
        <li>Monitor DI crossovers at DX extremes</li>
      </ul>
    </li>
    <li><strong>DX Divergence:</strong>
      <ul>
        <li>Price making new highs/lows with falling DX</li>
        <li>Suggests trend losing internal strength</li>
        <li>Early warning of potential reversal</li>
        <li>Confirm with other indicators</li>
      </ul>
    </li>
    <li><strong>ADX Construction:</strong> Smooth DX to create more reliable ADX signals</li>
  </ul>

  <h3>Advanced Techniques</h3>
  <ul>
    <li><strong>DX Rate of Change:</strong> Measure DX momentum for early signals</li>
    <li><strong>Multi-Period DX:</strong> Compare different period DX values</li>
    <li><strong>DX Histogram:</strong> Plot DX - Moving Average(DX) for clarity</li>
    <li><strong>Composite DX:</strong> Weight multiple timeframe DX readings</li>
  </ul>

  <h2>Practical Application</h2>
  
  <h3>Strengths</h3>
  <ul>
    <li>Raw measure of directional dominance</li>
    <li>Foundation for reliable ADX indicator</li>
    <li>Works in all market conditions</li>
    <li>Helps identify consolidation periods</li>
    <li>Clear mathematical basis</li>
  </ul>

  <h3>Limitations</h3>
  <ul>
    <li>Too volatile for direct trading use</li>
    <li>Requires smoothing (ADX) for reliability</li>
    <li>Doesn't indicate direction, only strength</li>
    <li>Can spike on single strong moves</li>
    <li>Less useful without +DI/-DI context</li>
  </ul>

  <h2>Combination with Other Indicators</h2>
  <p>DX is most useful when combined with:</p>
  <ul>
    <li><strong>+DI/-DI:</strong> Provides direction to go with DX strength</li>
    <li><strong>Moving Averages:</strong> Smooth DX to create ADX</li>
    <li><strong>ATR:</strong> Already incorporated in DX calculation</li>
    <li><strong>Momentum Oscillators:</strong> Confirm DX readings with RSI/MACD</li>
    <li><strong>Volume:</strong> Validate DX strength with volume analysis</li>
  </ul>

  <h2>Example Usage</h2>
  <p>Code examples will be available once the Rust implementation is complete.</p>

  <h2>Mathematical Background</h2>
  <p>
    The mathematical elegance of DX lies in its normalization technique. By dividing the absolute difference between 
    directional indicators by their sum, Wilder created a scale-invariant measure of directional dominance. This 
    ratio always produces values between 0 and 100, regardless of the underlying price or volatility levels, making 
    it comparable across different markets and timeframes.
  </p>
  <p>
    The formula essentially measures the "purity" of directional movement. When one DI is very high and the other 
    near zero, the difference approaches the sum, yielding DX near 100. When both DIs are equal, the difference is 
    zero, yielding DX of 0. This mathematical relationship creates an intuitive measure where higher values always 
    indicate clearer directional movement, forming the perfect foundation for the smoothed ADX indicator that traders 
    rely on for trend strength assessment.
  </p>

</IndicatorLayout>