---
import IndicatorLayout from '../../layouts/IndicatorLayout.astro';

const indicatorId = 'kurtosis';
const indicatorName = 'Kurtosis';
const description = `Kurtosis is a statistical measure that quantifies the "tailedness" of a price distribution, helping traders identify potential market regime changes, volatility clusters, and extreme price movements that may signal trading opportunities or increased risk.`;
const parameters = [
  {
    "name": "period",
    "type": "number",
    "default": 20,
    "min": 10,
    "max": 200,
    "description": "Lookback period for distribution analysis"
  }
];
---

<IndicatorLayout
  indicatorId={indicatorId}
  indicatorName={indicatorName}
  description={description}
  parameters={parameters}
>
  <h2 id="overview">Overview</h2>
  <p>
    Kurtosis is a statistical measure from the fourth moment of a distribution that describes the 
    shape of price return distributions, specifically measuring how much of the variance is due to 
    extreme deviations versus moderate fluctuations. In financial markets, kurtosis helps identify 
    periods when prices are more likely to experience extreme movements.
  </p>
  <p>
    A distribution with high kurtosis (leptokurtic) has heavy tails and a sharp peak, indicating 
    higher probability of extreme price movements. Low kurtosis (platykurtic) suggests a flatter 
    distribution with fewer extremes. Normal distributions have a kurtosis of 3 (or excess kurtosis 
    of 0). Traders use kurtosis to assess market risk, identify regime changes, and adjust position 
    sizing based on the likelihood of tail events.
  </p>

  <h2 id="interpretation">Interpretation</h2>
  <h3>Kurtosis Values</h3>
  <ul>
    <li><strong>High Kurtosis ( &gt; 3):</strong> Fat tails, higher risk of extreme moves</li>
    <li><strong>Normal Kurtosis (≈ 3):</strong> Standard normal distribution behavior</li>
    <li><strong>Low Kurtosis ( &lt; 3):</strong> Thin tails, more predictable price action</li>
    <li><strong>Excess Kurtosis:</strong> Kurtosis - 3, centered around zero</li>
  </ul>

  <h3>Trading Applications</h3>
  <ul>
    <li><strong>Risk assessment:</strong> Higher kurtosis suggests higher tail risk</li>
    <li><strong>Volatility regimes:</strong> Changes in kurtosis indicate regime shifts</li>
    <li><strong>Position sizing:</strong> Reduce size during high kurtosis periods</li>
    <li><strong>Option strategies:</strong> High kurtosis favors long volatility</li>
    <li><strong>Market timing:</strong> Extreme kurtosis often precedes reversals</li>
  </ul>

  <h3>Market Behavior</h3>
  <ul>
    <li><strong>Crisis periods:</strong> Kurtosis typically spikes during market stress</li>
    <li><strong>Quiet markets:</strong> Low kurtosis indicates range-bound conditions</li>
    <li><strong>Breakout potential:</strong> Rising kurtosis may signal impending moves</li>
    <li><strong>Distribution changes:</strong> Monitor for shifts in market character</li>
  </ul>

  <h2 id="calculation">Calculation</h2>
  <p>Kurtosis calculation involves computing the fourth standardized moment:</p>
  <ol>
    <li><strong>Calculate Returns:</strong>
      <ul>
        <li>Returns = (Price[i] - Price[i-1]) / Price[i-1]</li>
      </ul>
    </li>
    <li><strong>Calculate Mean and Standard Deviation:</strong>
      <ul>
        <li>Mean = Σ(Returns) / n</li>
        <li>Std Dev = √(Σ(Returns - Mean)² / (n-1))</li>
      </ul>
    </li>
    <li><strong>Calculate Fourth Moment:</strong>
      <ul>
        <li>Kurtosis = [n(n+1) / ((n-1)(n-2)(n-3))] × Σ[(Returns - Mean)⁴ / σ⁴]</li>
        <li>Adjust for sample bias: - [3(n-1)² / ((n-2)(n-3))]</li>
      </ul>
    </li>
    <li><strong>Excess Kurtosis:</strong>
      <ul>
        <li>Excess = Kurtosis - 3</li>
        <li>Positive = Fat tails, Negative = Thin tails</li>
      </ul>
    </li>
  </ol>
  <p>
    The calculation uses sample kurtosis with bias correction (Fisher's definition). Values are 
    typically computed on a rolling basis to track changes in distribution shape over time.
  </p>

  <h2 id="parameters">Parameters</h2>
  <ul>
    <li>
      <strong>Period (default: 20):</strong> The lookback window for calculating the distribution 
      statistics. This determines how many price returns are used to compute kurtosis. Shorter 
      periods (10-15) are more responsive to recent changes but may be noisy. Longer periods 
      (30-60) provide more stable readings but may miss rapid regime changes. The period should 
      be long enough to capture meaningful distribution characteristics but short enough to remain 
      relevant to current market conditions.
    </li>
  </ul>

  <h2 id="returns">Returns & Output</h2>
  <p>The indicator returns kurtosis values:</p>
  <ul>
    <li><strong>Type:</strong> Array of floating-point numbers</li>
    <li><strong>Range:</strong> Typically 1.5 to 10+ (can theoretically be infinite)</li>
    <li><strong>Normal value:</strong> 3.0 for normal distribution</li>
    <li><strong>Excess kurtosis:</strong> Subtract 3 for zero-centered values</li>
    <li><strong>Initial values:</strong> First 'period' values will be null/undefined</li>
  </ul>

  <h2 id="usage">Example Usage</h2>
  <h3>Rust Implementation</h3>
  <pre><code class="language-rust"> // Rust implementation example will be added here
</code></pre>

  <h3>Python Integration</h3> <pre><code class="language-python"> # Python implementation example will be added here
</code></pre>

  <h2 id="use-cases"> Common Use Cases</h2> <h3>1. Dynamic Risk Management</h3> <p>Adjusting positions based on tail risk:</p>
  <pre><code class="language-python"> # Python implementation example will be added here
</code></pre>

  <h3>2. Volatility Trading Strategy</h3> <p>Trading volatility based on distribution changes:</p>
  <pre><code class="language-python"> # Python implementation example will be added here
</code></pre>

  <h3>3. Regime Detection System</h3> <p>Identifying market regime changes using kurtosis:</p>
  <pre><code class="language-python"> # Python implementation example will be added here
</code></pre>

  <h2 id="edge-cases"> Edge Cases & Errors</h2>
  <h3>Common Issues</h3>
  <ul>
    <li><strong>Small samples:</strong> Kurtosis estimates unreliable with &lt; 30 observations</li>
    <li><strong>Outliers:</strong> Single extreme values can dominate kurtosis calculation</li>
    <li><strong>Non-stationarity:</strong> Changing market conditions affect interpretation</li>
    <li><strong>Sample bias:</strong> Finite sample corrections still imperfect</li>
  </ul>

  <h3>Best Practices</h3>
  <ul>
    <li>Use minimum 20-30 periods for reliable estimates</li>
    <li>Compare to historical kurtosis levels, not just absolute values</li>
    <li>Combine with skewness for complete distribution picture</li>
    <li>Consider robust kurtosis measures for outlier resistance</li>
    <li>Monitor kurtosis trends, not just current values</li>
    <li>Adjust strategies gradually as kurtosis changes</li>
  </ul>

  <h2 id="references">References</h2>
  <ul>
    <li>DeCarlo, L. T. (1997). "On the meaning and use of kurtosis." Psychological Methods.</li>
    <li>Westfall, P. H. (2014). "Kurtosis as Peakedness, 1905–2014. R.I.P." The American Statistician.</li>
    <li>Mandelbrot, B. & Hudson, R. (2004). <em>The (Mis)behavior of Markets</em>. Basic Books.</li>
    <li>Fat-tailed distributions in finance and risk management applications</li>
  </ul>
</IndicatorLayout>
