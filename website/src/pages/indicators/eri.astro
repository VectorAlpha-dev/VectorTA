---
import IndicatorLayout from '../../layouts/IndicatorLayout.astro';

const indicatorId = 'eri';
const indicatorName = 'Elder Ray Index (Bull/Bear Power)';
const description = `The Elder Ray Index, developed by Dr. Alexander Elder, uses the metaphor of x-rays to look beneath the surface of the market and measure the underlying power of bulls and bears. By comparing highs and lows to an exponential moving average, Elder Ray reveals whether buying or selling pressure is dominant, helping traders align with the stronger force.`;
const parameters = [
  {
    "name": "period",
    "type": "number",
    "default": 13,
    "min": 10,
    "max": 30,
    "description": "EMA period for the Elder Ray calculation"
  }
];
---

<IndicatorLayout
  indicatorId={indicatorId}
  indicatorName={indicatorName}
  description={description}
  parameters={parameters}
>
  <h2>Overview</h2>
  <p>
    The Elder Ray Index, created by Dr. Alexander Elder as part of his Triple Screen Trading System, provides unique 
    insights into the battle between bulls and bears by measuring their respective power. Elder brilliantly recognized 
    that the high of each bar represents the maximum power of bulls (their ability to push prices up), while the low 
    represents the maximum power of bears (their ability to push prices down). By comparing these extremes to a 
    13-period EMA, Elder Ray quantifies which group is in control and whether their power is increasing or decreasing.
  </p>
  <p>
    What makes Elder Ray particularly effective is its ability to identify divergences between price action and the 
    underlying strength of market participants. When prices make new highs but Bull Power decreases, it warns that 
    bulls are losing strength despite the rising prices—a classic setup for reversals. Similarly, when Bear Power 
    becomes less negative during downtrends, it signals that selling pressure is waning. This x-ray vision into 
    market dynamics helps traders avoid false breakouts and identify high-probability turning points.
  </p>

  <h2>How It Works</h2>
  <p>Elder Ray consists of two components measuring bull and bear strength:</p>
  <ol>
    <li><strong>Calculate EMA:</strong> 13-period exponential moving average as baseline</li>
    <li><strong>Bull Power:</strong> High minus EMA (bulls' ability to push above average)</li>
    <li><strong>Bear Power:</strong> Low minus EMA (bears' ability to push below average)</li>
    <li><strong>Analyze Together:</strong> Combined view shows market control</li>
    <li><strong>Watch Divergences:</strong> Power vs price divergences signal reversals</li>
  </ol>
  
  <div class="not-prose bg-gray-100 dark:bg-gray-800 p-4 rounded-lg my-4 border border-gray-200 dark:border-gray-700">
    <p class="font-mono text-sm mb-0 text-gray-800 dark:text-gray-200">
      Elder Ray Calculations:<br/>
      <br/>
      EMA = 13-period Exponential Moving Average of Close<br/>
      <br/>
      Bull Power = High - EMA<br/>
      Bear Power = Low - EMA<br/>
      <br/>
      Interpretations:<br/>
      Bull Power > 0: Bulls pushed price above average<br/>
      Bull Power < 0: Bulls couldn't even reach average<br/>
      Bear Power < 0: Bears pushed price below average<br/>
      Bear Power > 0: Bears couldn't push below average<br/>
      <br/>
      Key Patterns:<br/>
      Rising Bull Power: Increasing buying strength<br/>
      Falling Bull Power: Weakening buying strength<br/>
      Less negative Bear Power: Weakening selling<br/>
      More negative Bear Power: Increasing selling<br/>
      <br/>
      Divergences:<br/>
      Price ↑, Bull Power ↓ = Bearish divergence<br/>
      Price ↓, Bear Power ↑ = Bullish divergence
    </p>
  </div>

  <h2>Key Features</h2>
  <ul>
    <li><strong>Dual Perspective:</strong> Separate measurement of bull and bear strength</li>
    <li><strong>Divergence Detection:</strong> Excellent for spotting reversals</li>
    <li><strong>Trend Confirmation:</strong> Validates trend strength</li>
    <li><strong>Clear Signals:</strong> Simple positive/negative readings</li>
  </ul>

  <h2>Interpretation & Trading Signals</h2>
  
  <h3>Elder Ray Analysis</h3>
  <div class="not-prose bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg my-4 border border-blue-200 dark:border-blue-800">
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100">Power Readings:</h4>
    <ul class="list-disc list-inside mb-4 text-gray-700 dark:text-gray-300">
      <li><strong class="text-gray-900 dark:text-gray-100">Both Positive:</strong> Strong uptrend, bulls in complete control</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Bull + / Bear -:</strong> Normal uptrend conditions</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Both Negative:</strong> Strong downtrend, bears in control</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Bull - / Bear +:</strong> Unusual, often at major turns</li>
    </ul>
    
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100">Key Signals:</h4>
    <ul class="list-disc list-inside text-gray-700 dark:text-gray-300">
      <li><strong class="text-gray-900 dark:text-gray-100">Bear Power > 0:</strong> Very bullish, bears can't push below EMA</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Bull Power < 0:</strong> Very bearish, bulls can't reach EMA</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Divergences:</strong> Most reliable reversal signals</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Zero Line Crosses:</strong> Momentum shifts</li>
    </ul>
  </div>

  <h3>Trading Strategies</h3>
  <ul>
    <li><strong>Triple Screen Integration:</strong>
      <ul>
        <li>Use weekly trend as first screen</li>
        <li>Daily Elder Ray as second screen</li>
        <li>Buy when Bear Power is negative but rising</li>
        <li>Sell when Bull Power is positive but falling</li>
      </ul>
    </li>
    <li><strong>Divergence Trading:</strong>
      <ul>
        <li>Bullish: Price makes lower low, Bear Power less negative</li>
        <li>Bearish: Price makes higher high, Bull Power decreases</li>
        <li>Confirm with EMA direction</li>
        <li>Enter on power indicator zero line cross</li>
      </ul>
    </li>
    <li><strong>Trend Following:</strong>
      <ul>
        <li>Long only when Bull Power > 0</li>
        <li>Short only when Bear Power < 0</li>
        <li>Exit longs if Bull Power turns negative</li>
        <li>Exit shorts if Bear Power turns positive</li>
      </ul>
    </li>
    <li><strong>Power Spike Fading:</strong> Extreme readings often mark exhaustion</li>
  </ul>

  <h3>Advanced Techniques</h3>
  <ul>
    <li><strong>Smoothed Elder Ray:</strong> Apply smoothing to reduce noise</li>
    <li><strong>Elder Ray Histogram:</strong> Plot Bull Power - Bear Power</li>
    <li><strong>Multi-Timeframe Elder Ray:</strong> Align power across timeframes</li>
    <li><strong>Elder Ray Bands:</strong> Create dynamic bands using power values</li>
  </ul>

  <h2>Practical Application</h2>
  
  <h3>Strengths</h3>
  <ul>
    <li>Clear measurement of bull/bear strength</li>
    <li>Excellent divergence indicator</li>
    <li>Works well in trending markets</li>
    <li>Part of proven Triple Screen system</li>
    <li>Simple calculation and interpretation</li>
  </ul>

  <h3>Limitations</h3>
  <ul>
    <li>Can whipsaw in ranging markets</li>
    <li>Requires EMA trend confirmation</li>
    <li>Less effective in low volatility</li>
    <li>May lag at major turning points</li>
    <li>Best used with other indicators</li>
  </ul>

  <h2>Combination with Other Indicators</h2>
  <p>Elder Ray works exceptionally well with:</p>
  <ul>
    <li><strong>MACD:</strong> Elder Ray for power, MACD for momentum</li>
    <li><strong>Force Index:</strong> Combine Elder's indicators</li>
    <li><strong>Moving Averages:</strong> EMA provides trend context</li>
    <li><strong>Stochastic:</strong> Elder Ray for trend, Stochastic for timing</li>
    <li><strong>Volume:</strong> Confirm power readings with volume</li>
  </ul>

  <h2>Example Usage</h2>
  <p>Code examples will be available once the Rust implementation is complete.</p>

  <h2>Mathematical Background</h2>
  <p>
    The mathematical insight behind Elder Ray is the decomposition of price action into its bull and bear components 
    relative to a moving average baseline. By using the high and low rather than just the close, Elder captures the 
    full range of market participant behavior within each period. The EMA serves as a consensus fair value, making 
    deviations above (Bull Power) and below (Bear Power) meaningful measures of which group has temporary control.
  </p>
  <p>
    This approach elegantly solves the problem of measuring market participant strength in a normalized way. Traditional 
    oscillators often use closing prices, missing the intraday battle between buyers and sellers. Elder Ray captures 
    this battle by recognizing that the high represents the maximum achievement of bulls during the period, while the 
    low represents the maximum achievement of bears. The distance from the EMA then quantifies not just who won, but 
    by how much, providing actionable insights into the shifting balance of market power.
  </p>
</IndicatorLayout>