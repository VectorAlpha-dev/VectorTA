---
import IndicatorLayout from '../../layouts/IndicatorLayout.astro';

const indicatorId = 'bollinger_bands_width';
const indicatorName = 'Bollinger Bands Width';
const description = `Bollinger Bands Width (BBW) is a technical indicator derived from Bollinger Bands that measures the distance between the upper and lower bands. Created by John Bollinger, it quantifies market volatility and helps identify periods of low volatility (squeeze) that often precede significant price movements.`;
const parameters = [
  {
    "name": "period",
    "type": "number",
    "default": 20,
    "min": 10,
    "max": 50,
    "description": "Number of periods for moving average and standard deviation"
  },
  {
    "name": "std_dev",
    "type": "number",
    "default": 2,
    "min": 1.0,
    "max": 3.0,
    "description": "Number of standard deviations for band calculation"
  }
];
---

<IndicatorLayout
  indicatorId={indicatorId}
  indicatorName={indicatorName}
  description={description}
  parameters={parameters}
>
  <h2>Overview</h2>
  <p>
    Bollinger Bands Width (BBW) is a volatility indicator that measures the percentage or absolute difference between 
    the upper and lower Bollinger Bands. Developed by John Bollinger, this indicator provides a normalized view of 
    volatility that makes it easier to identify volatility cycles and potential breakout opportunities across different 
    markets and timeframes.
  </p>
  <p>
    The key insight of BBW is that periods of low volatility (narrow bands) are often followed by periods of high 
    volatility (wide bands). This phenomenon, known as "The Squeeze," helps traders anticipate potential breakouts 
    and prepare for increased market activity. BBW quantifies this concept, making it systematic and measurable.
  </p>

  <h2>How It Works</h2>
  <p>Bollinger Bands Width calculation is straightforward:</p>
  <ol>
    <li><strong>Calculate Bollinger Bands:</strong> Middle Band (SMA), Upper Band (SMA + k×σ), Lower Band (SMA - k×σ)</li>
    <li><strong>Measure the Width:</strong> Upper Band - Lower Band</li>
    <li><strong>Normalize (optional):</strong> Express as percentage of middle band</li>
  </ol>
  
  <div class="not-prose bg-gray-100 dark:bg-gray-800 p-4 rounded-lg my-4 border border-gray-200 dark:border-gray-700">
    <p class="font-mono text-sm mb-0 text-gray-800 dark:text-gray-200"> Middle Band = SMA(Close, Period)<br/>
      Upper Band = Middle Band + (StdDev × σ)<br/>
      Lower Band = Middle Band - (StdDev × σ)<br/>
      <br/>
      Absolute Width = Upper Band - Lower Band<br/>
      <br/>
      Relative Width = ((Upper Band - Lower Band) / Middle Band) × 100<br/>
      <br/>
      Where σ = Standard Deviation of closing prices
    </p>
  </div>

  <h2>Key Features</h2>
  <ul>
    <li><strong>Volatility Measurement:</strong> Direct measure of market volatility</li>
    <li><strong>Squeeze Detection:</strong> Identifies low volatility periods before breakouts</li>
    <li><strong>Cycle Identification:</strong> Shows volatility expansion and contraction cycles</li>
    <li><strong>Market Neutral:</strong> Works equally well in all market conditions</li>
  </ul>

  <h2>Interpretation & Trading Signals</h2>
  
  <h3>Volatility States</h3>
  <div class="not-prose bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg my-4 border border-blue-200 dark:border-blue-800">
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100"> BBW Readings:</h4> <ul class="list-disc list-inside mb-4 text-gray-700 dark:text-gray-300"> <li><strong class="text-gray-900 dark:text-gray-100"> Very Low BBW:</strong> The Squeeze - potential breakout imminent</li>
      <li><strong class="text-gray-900 dark:text-gray-100"> Low BBW:</strong> Consolidation phase, building energy</li>
      <li><strong class="text-gray-900 dark:text-gray-100"> High BBW:</strong> High volatility, trending or volatile market</li>
      <li><strong class="text-gray-900 dark:text-gray-100"> Very High BBW:</strong> Extreme volatility, potential exhaustion</li>
    </ul>
    
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100"> Key Patterns:</h4> <ul class="list-disc list-inside text-gray-700 dark:text-gray-300"> <li><strong class="text-gray-900 dark:text-gray-100"> The Squeeze:</strong> BBW at multi-period low (6-month low is classic)</li>
      <li><strong class="text-gray-900 dark:text-gray-100"> Squeeze Fire:</strong> BBW rapidly expanding from low levels</li>
      <li><strong class="text-gray-900 dark:text-gray-100"> Volatility Peak:</strong> BBW at extreme highs often marks trend exhaustion</li>
      <li><strong class="text-gray-900 dark:text-gray-100"> Bulge:</strong> Sharp BBW expansion indicates strong directional move</li>
    </ul>
  </div>

  <h3>Trading Strategies</h3>
  <ul>
    <li><strong>The Squeeze Trade:</strong>
      <ul>
        <li>Identify when BBW is at 6-month (or longer) low</li>
        <li>Prepare for breakout in either direction</li>
        <li>Enter on price breakout with expanding BBW</li>
      </ul>
    </li>
    <li><strong>Volatility Cycles:</strong>
      <ul>
        <li>Low BBW: Prepare for volatility expansion</li>
        <li>High BBW: Prepare for volatility contraction</li>
      </ul>
    </li>
    <li><strong>Trend Confirmation:</strong>
      <ul>
        <li>Expanding BBW confirms new trends</li>
        <li>Contracting BBW suggests trend weakness</li>
      </ul>
    </li>
    <li><strong>Mean Reversion:</strong> Extreme BBW readings often precede volatility normalization</li>
  </ul>

  <h3>Advanced Techniques</h3>
  <ul>
    <li><strong>BBW Divergence:</strong> Price making new highs with contracting BBW suggests weakness</li>
    <li><strong>Relative BBW:</strong> Compare current BBW to its own moving average</li>
    <li><strong>Multi-Timeframe:</strong> Confirm squeezes across multiple timeframes</li>
    <li><strong>Volume Confirmation:</strong> Low volume during squeeze, high volume on breakout</li>
  </ul>

  <h2>Practical Application</h2>
  
  <h3>Strengths</h3>
  <ul>
    <li>Excellent at identifying low volatility periods before breakouts</li>
    <li>Quantifies volatility in easy-to-compare format</li>
    <li>Works across all markets and timeframes</li>
    <li>No directional bias - purely volatility focused</li>
    <li>Simple calculation and interpretation</li>
  </ul>

  <h3>Limitations</h3>
  <ul>
    <li>Doesn't indicate breakout direction</li>
    <li>Can give false squeeze signals in trending markets</li>
    <li>Requires additional indicators for entry timing</li>
    <li>Historical context needed for "low" determination</li>
    <li>Less effective in perpetually volatile markets</li>
  </ul>

  <h2>Combination with Other Indicators</h2>
  <p>BBW works best when combined with:</p>
  <ul>
    <li><strong>Bollinger Bands:</strong> Use together for complete volatility picture</li>
    <li><strong>Volume:</strong> Confirm squeezes with low volume, breakouts with high volume</li>
    <li><strong>ADX:</strong> Distinguish between trending and non-trending volatility</li>
    <li><strong>Momentum Oscillators:</strong> RSI/Stochastic for breakout direction hints</li>
    <li><strong>Keltner Channels:</strong> Create squeeze indicator by comparing with BB</li>
  </ul>

  <h2>Example Usage</h2>
  <p>Code examples will be available once the Rust implementation is complete.</p>
  </div>

  <h2>Mathematical Background</h2>
  <p>
    Bollinger Bands Width is elegantly simple yet profoundly useful. By measuring the distance between bands that 
    are themselves based on standard deviation, BBW essentially provides a normalized volatility measure that 
    adapts to each market's characteristics. The width directly reflects 2k times the standard deviation (where k 
    is the band multiplier), making it a pure volatility metric.
  </p>
  <p>
    The power of BBW lies in its ability to identify volatility cycles. John Bollinger's observation that periods 
    of low volatility are followed by periods of high volatility (and vice versa) is rooted in market psychology 
    and the natural rhythm of accumulation/distribution cycles. The "Squeeze" concept has become a cornerstone of 
    volatility-based trading strategies.
  </p>

</IndicatorLayout>
