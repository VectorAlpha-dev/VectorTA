---
import IndicatorLayout from '../../layouts/IndicatorLayout.astro';

const indicatorId = 'decycler';
const indicatorName = 'Ehlers Decycler';
const description = `The Ehlers Decycler is an advanced signal processing indicator developed by John Ehlers that removes cyclic components from price data to reveal the underlying trend. By using sophisticated high-pass filtering techniques, it strips away short-term oscillations and noise, leaving a smooth representation of the dominant market direction.`;
const parameters = [
  {
    "name": "period",
    "type": "number",
    "default": 125,
    "min": 20,
    "max": 250,
    "description": "High-pass filter period for cycle removal"
  }
];
---

<IndicatorLayout
  indicatorId={indicatorId}
  indicatorName={indicatorName}
  description={description}
  parameters={parameters}
>
  <h2>Overview</h2>
  <p>
    The Ehlers Decycler represents a groundbreaking application of digital signal processing to financial markets. 
    Developed by John Ehlers, a pioneer in applying engineering concepts to trading, the Decycler uses a high-pass 
    filter to remove short-term cycles from price data. What remains is a remarkably smooth trend line that captures 
    the essential direction of the market without the noise and oscillations that plague traditional moving averages.
  </p>
  <p>
    The brilliance of the Decycler lies in its approach: instead of trying to smooth price data (like moving averages), 
    it removes specific frequency components. This subtractive approach preserves the integrity of the underlying trend 
    while eliminating cyclic behavior that can trigger false signals. The result is an indicator that responds quickly 
    to genuine trend changes while ignoring short-term market noise.
  </p>

  <h2>How It Works</h2>
  <p>The Decycler employs sophisticated digital filtering techniques:</p>
  <ol>
    <li><strong>High-Pass Filter Design:</strong> Creates a filter to remove low-frequency (trend) components</li>
    <li><strong>Apply to Price:</strong> Processes price data through the filter</li>
    <li><strong>Subtract from Original:</strong> Removes filtered cycles from original price</li>
    <li><strong>Result:</strong> Smooth trend line with cycles removed</li>
  </ol>
  
  <div class="not-prose bg-gray-100 dark:bg-gray-800 p-4 rounded-lg my-4 border border-gray-200 dark:border-gray-700">
    <p class="font-mono text-sm mb-0 text-gray-800 dark:text-gray-200">
      α = (cos(2π/Period) + sin(2π/Period) - 1) / cos(2π/Period)<br/>
      <br/>
      HP[i] = (1 - α/2)² × (Price[i] - 2×Price[i-1] + Price[i-2]) + <br/>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2×(1 - α) × HP[i-1] - (1 - α)² × HP[i-2]<br/>
      <br/>
      Decycler = Price - HP<br/>
      <br/>
      Where:<br/>
      - HP = High-Pass filtered output (cycles)<br/>
      - α = Filter coefficient<br/>
      - Decycler = Trend with cycles removed
    </p>
  </div>

  <h2>Key Features</h2>
  <ul>
    <li><strong>Cycle Removal:</strong> Eliminates short-term oscillations from price</li>
    <li><strong>Trend Preservation:</strong> Maintains integrity of underlying trend</li>
    <li><strong>Low Lag:</strong> Responds quickly to genuine trend changes</li>
    <li><strong>Smooth Output:</strong> Produces exceptionally smooth trend lines</li>
  </ul>

  <h2>Interpretation & Trading Signals</h2>
  
  <h3>Decycler Analysis</h3>
  <div class="not-prose bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg my-4 border border-blue-200 dark:border-blue-800">
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100">Trend Identification:</h4>
    <ul class="list-disc list-inside mb-4 text-gray-700 dark:text-gray-300">
      <li><strong class="text-gray-900 dark:text-gray-100">Rising Decycler:</strong> Underlying uptrend intact</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Falling Decycler:</strong> Underlying downtrend intact</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Flat Decycler:</strong> No clear trend direction</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Slope Change:</strong> Potential trend reversal</li>
    </ul>
    
    <h4 class="font-semibold mb-2 text-lg text-blue-900 dark:text-blue-100">Trading Signals:</h4>
    <ul class="list-disc list-inside text-gray-700 dark:text-gray-300">
      <li><strong class="text-gray-900 dark:text-gray-100">Price Above Decycler:</strong> Short-term bullish, trend support</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Price Below Decycler:</strong> Short-term bearish, trend resistance</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Price Crosses Decycler:</strong> Potential cycle turning point</li>
      <li><strong class="text-gray-900 dark:text-gray-100">Decycler Acceleration:</strong> Trend strengthening</li>
    </ul>
  </div>

  <h3>Trading Strategies</h3>
  <ul>
    <li><strong>Trend Following:</strong>
      <ul>
        <li>Long positions only when Decycler is rising</li>
        <li>Short positions only when Decycler is falling</li>
        <li>Exit when Decycler slope changes</li>
      </ul>
    </li>
    <li><strong>Support/Resistance:</strong>
      <ul>
        <li>Use Decycler as dynamic support in uptrends</li>
        <li>Use Decycler as dynamic resistance in downtrends</li>
        <li>Enter on bounces off Decycler line</li>
      </ul>
    </li>
    <li><strong>Cycle Trading:</strong>
      <ul>
        <li>Measure distance between price and Decycler</li>
        <li>Trade extremes back toward Decycler</li>
        <li>Use for mean reversion within trend</li>
      </ul>
    </li>
    <li><strong>Filter Strategy:</strong> Only take signals in direction of Decycler trend</li>
  </ul>

  <h3>Advanced Techniques</h3>
  <ul>
    <li><strong>Multiple Periods:</strong> Use different Decycler periods for different cycle removals</li>
    <li><strong>Trend Strength:</strong> Measure Decycler slope for trend intensity</li>
    <li><strong>Divergence Analysis:</strong> Compare price action to Decycler direction</li>
    <li><strong>Composite Filtering:</strong> Combine with other Ehlers indicators</li>
  </ul>

  <h2>Practical Application</h2>
  
  <h3>Strengths</h3>
  <ul>
    <li>Superior trend identification</li>
    <li>Removes market noise effectively</li>
    <li>Minimal lag compared to moving averages</li>
    <li>Works in all market conditions</li>
    <li>Based on sound signal processing theory</li>
  </ul>

  <h3>Limitations</h3>
  <ul>
    <li>Complex calculation requiring understanding of DSP</li>
    <li>May remove profitable short-term moves</li>
    <li>Period selection critical for effectiveness</li>
    <li>Less intuitive than traditional indicators</li>
    <li>Requires stable market cycles</li>
  </ul>

  <h2>Combination with Other Indicators</h2>
  <p>The Decycler works exceptionally well with:</p>
  <ul>
    <li><strong>Ehlers Indicators:</strong> Combine with MESA, Instantaneous Trend</li>
    <li><strong>Oscillators:</strong> Use RSI/Stochastic for cycle timing, Decycler for trend</li>
    <li><strong>Volume Analysis:</strong> Confirm Decycler trends with volume</li>
    <li><strong>Momentum Indicators:</strong> Time entries with momentum in Decycler direction</li>
    <li><strong>Volatility Measures:</strong> Adjust strategies based on market volatility</li>
  </ul>

  <h2>Example Usage</h2>
  <p>Code examples will be available once the Rust implementation is complete.</p>

  <h2>Mathematical Background</h2>
  <p>
    The Decycler's mathematical foundation rests on digital signal processing theory, specifically the design of 
    high-pass filters. The filter uses a second-order infinite impulse response (IIR) design that provides excellent 
    frequency selectivity with minimal lag. The coefficient α is derived from the desired cutoff frequency, ensuring 
    that cycles shorter than the specified period are passed through while longer cycles (the trend) are blocked.
  </p>
  <p>
    By subtracting the high-pass filtered output from the original price, Ehlers creates an elegant solution: the 
    high-pass filter extracts the cycles, and removing them from price leaves only the trend. This subtractive 
    synthesis approach is more effective than traditional smoothing because it preserves the trend's 
    characteristics while removing specific frequency components that cause noise and false signals.
  </p>

</IndicatorLayout>